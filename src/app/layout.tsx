import type { Metadata } from 'next';
import localFont from 'next/font/local';
import Header from '@/app/components/Layout/Header';
import Footer from '@/app/components/Layout/Footer';
import './globals.css';
import { Status } from '@/service/api';
import { i18nTranslate } from '@/service/i18n';
// import { headers } from 'next/headers';


const font = localFont({ src: '../../public/fonts/Vazirmatn[wght].ttf' });

export const metadata: Metadata = {
  title: {
    default: i18nTranslate('newsWebsite'),
    template: `%s - ${i18nTranslate('newsWebsite')}`,
  },
  themeColor: 'light',
  description: 'Generated by create next app',
};

type Props = {
  children: React.ReactNode;
  pageProps: string;
};

export const revalidate = 0;

async function getData() {
  return await Status.checkStatusHandler(true);
}

export default async function RootLayout({ children, pageProps }: Props) {
  await getData();
  // const headersList = headers();
  // // read the custom x-url header
  // for (const key of headersList.keys()) {
  //   console.log(key);
  // }

  // console.log(headersList.get('accept'));

  return (
    <html
      lang={process.env.NEXT_LOCALE}
      dir={process.env.NEXT_LOCALE === 'en' ? 'ltr' : 'rtl'}
      data-theme='light'>
      <body className={font.className}>
        <Header />

        <main className='flex min-h-screen flex-col items-center justify-between'>
          {children}
        </main>

        <Footer />
      </body>
    </html>
  );
}
